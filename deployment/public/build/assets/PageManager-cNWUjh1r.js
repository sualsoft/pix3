import{r as b,o as j,j as D,k as G,d as e,n as m,c as i,e as p,g as v,b as a,t as g,f as s,v as d,H as _,F,q as O,h as c}from"./app-BbXs9E4b.js";import{_ as M}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-rkE-YaF7.js";const S={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},E={class:"mx-auto max-w-6xl"},A={class:"flex items-center justify-between bg-gradient-to-r from-blue-700 to-indigo-800 p-6 text-white"},z={class:"flex items-center gap-2 text-2xl font-bold"},L={key:0,class:"fa-solid fa-pen-to-square"},N={key:1,class:"fa-solid fa-plus-circle"},$={class:"space-y-6 p-6 md:p-8"},B={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},q={class:"flex gap-2"},J={class:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg border border-blue-200 bg-blue-50 text-xl text-blue-600 shadow-sm"},R={class:"md:col-span-2"},H={class:"flex flex-col items-start gap-6 md:flex-row"},W={class:"group relative flex aspect-video w-full items-center justify-center overflow-hidden rounded-lg border-2 border-dashed border-gray-300 bg-gray-100 md:w-1/3"},Y=["src"],K={key:1,class:"p-4 text-center text-gray-400"},Q={class:"w-full flex-1"},X={key:0,class:"mb-2 text-sm text-gray-600"},Z={class:"mt-6"},ee={class:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-2"},te={class:"mb-4"},le={class:"mt-4 border-t border-gray-200 pt-4"},oe={class:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-2"},re={class:"mb-4"},se={class:"flex flex-col gap-4 md:flex-row"},ae={key:0,class:"h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg border-2 border-gray-300"},ie=["src"],de={class:"flex-1"},ne={class:"mt-4 border-t border-gray-200 pt-4"},ue={class:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-2"},be={class:"mb-4"},ge={class:"flex flex-col gap-4 md:flex-row"},me={key:0,class:"h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg border-2 border-gray-300"},pe=["src"],fe={class:"flex-1"},ve={class:"flex items-center justify-end gap-4 border-t border-gray-200 pt-6"},ce=["disabled"],xe={key:0,class:"fa-solid fa-spinner animate-spin"},ye={class:"mb-6 flex items-center gap-2 text-2xl font-bold text-gray-900"},we={class:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3"},he={class:"relative h-48 overflow-hidden bg-gray-100"},ke=["src"],_e={class:"p-5"},Te={class:"mb-3 flex items-start gap-4"},Ce={class:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl border border-blue-100 bg-gradient-to-br from-blue-50 to-indigo-50 text-xl text-blue-600 shadow-sm"},Ve={class:"mb-1 text-lg leading-tight font-bold text-gray-900"},Ie={class:"inline-block rounded bg-gray-100 px-1 font-mono text-xs text-gray-500"},Ue={class:"mt-4 flex gap-2 border-t border-gray-100 pt-4"},Pe=["onClick"],je=["onClick"],Oe={__name:"PageManager",setup(De){const x=b([]),u=b(""),f=b(!1),n=b(!1),y=b(null),w=b(null),l=b({title:"",category:"timelapse",icon:"fa-solid fa-camera",video_url:"",content:"",thumbnail:null,thumbnail_preview:null}),h=async()=>{try{const r=await c.get("/api/service-pages");x.value=r.data}catch(r){console.error(r)}},C=r=>{const t=r.target.files[0];if(t){l.value.thumbnail=t;const o=new FileReader;o.onload=k=>l.value.thumbnail_preview=k.target.result,o.readAsDataURL(t)}},V=r=>{n.value=!0,y.value=r.id,l.value.title=r.title,l.value.category=r.category,l.value.icon=r.icon||"fa-solid fa-camera",l.value.video_url=r.video_url,l.value.content=r.content,l.value.thumbnail_preview=r.thumbnail,l.value.thumbnail=null,w.value&&w.value.scrollIntoView({behavior:"smooth",block:"start"})},T=()=>{n.value=!1,y.value=null,I()},I=()=>{l.value={title:"",category:"timelapse",icon:"fa-solid fa-camera",video_url:"",content:"",thumbnail:null,thumbnail_preview:null}},U=async()=>{f.value=!0,u.value="";const r=new FormData;r.append("title",l.value.title),r.append("category",l.value.category),r.append("icon",l.value.icon),r.append("content",l.value.content),l.value.video_url&&r.append("video_url",l.value.video_url),l.value.thumbnail&&r.append("thumbnail",l.value.thumbnail);try{n.value?(await c.post(`/api/service-pages/${y.value}`,r,{headers:{"Content-Type":"multipart/form-data"}}),u.value="✅ Page mise à jour !"):(await c.post("/api/service-pages",r,{headers:{"Content-Type":"multipart/form-data"}}),u.value="✅ Page créée !"),T(),h()}catch(t){u.value="❌ Erreur de sauvegarde.",console.error(t)}finally{f.value=!1}},P=async r=>{if(confirm("Supprimer cette page ?"))try{await c.delete(`/api/service-pages/${r}`),h()}catch{alert("Erreur")}};return j(()=>h()),(r,t)=>(a(),D(M,null,{default:G(()=>[e("div",S,[e("div",E,[e("div",{class:"mb-8 text-center",ref_key:"formTop",ref:w},[...t[17]||(t[17]=[e("h1",{class:"text-3xl font-bold text-gray-900"}," Gestionnaire de Pages ",-1),e("p",{class:"mt-2 text-gray-700"}," Gérez vos services Drone et Timelapse. ",-1)])],512),e("div",{class:m(["mb-12 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-xl transition-all duration-500",n.value?"scale-[1.01] transform ring-4 ring-blue-300":""])},[e("div",A,[e("h2",z,[n.value?(a(),i("i",L)):(a(),i("i",N)),v(" "+g(n.value?"Modifier la Page":"Nouvelle Page"),1)]),n.value?(a(),i("button",{key:0,onClick:T,class:"rounded-full bg-white/20 px-4 py-2 text-sm font-semibold backdrop-blur-sm transition hover:bg-white/30"}," Annuler l'édition ")):p("",!0)]),e("div",$,[e("div",B,[e("div",null,[t[18]||(t[18]=e("label",{class:"mb-2 block text-sm font-bold text-gray-800"},"Titre de la page",-1)),s(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.title=o),type:"text",placeholder:"ex: Suivi de Chantier",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600"},null,512),[[d,l.value.title]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"mb-2 block text-sm font-bold text-gray-800"},"Catégorie",-1)),s(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.category=o),class:"w-full rounded-lg border-2 border-gray-300 bg-white p-3 font-medium text-gray-900 transition focus:border-blue-600"},[...t[19]||(t[19]=[e("option",{value:"timelapse"},"Timelapse",-1),e("option",{value:"drone"},"Drone",-1)])],512),[[_,l.value.category]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"mb-2 block text-sm font-bold text-gray-800"},"Icône",-1)),e("div",q,[e("div",J,[e("i",{class:m(l.value.icon)},null,2)]),s(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.icon=o),type:"text",placeholder:"ex: fa-solid fa-camera",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600"},null,512),[[d,l.value.icon]])])]),e("div",null,[t[22]||(t[22]=e("label",{class:"mb-2 block text-sm font-bold text-gray-800"},"Lien YouTube",-1)),s(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.video_url=o),type:"text",placeholder:"https://youtube.com/...",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600"},null,512),[[d,l.value.video_url]])]),e("div",R,[t[24]||(t[24]=e("label",{class:"mb-2 block text-sm font-bold text-gray-800"},"Image de couverture",-1)),e("div",H,[e("div",W,[l.value.thumbnail_preview?(a(),i("img",{key:0,src:l.value.thumbnail_preview,class:"h-full w-full object-cover transition duration-300 group-hover:scale-105"},null,8,Y)):(a(),i("div",K,[...t[23]||(t[23]=[e("i",{class:"fa-regular fa-image mb-2 text-3xl"},null,-1),e("p",{class:"text-xs"},"Aucune image",-1)])]))]),e("div",Q,[n.value?(a(),i("p",X," L'image actuelle est affichée à gauche. Téléchargez-en une nouvelle seulement si vous souhaitez la remplacer. ")):p("",!0),e("input",{type:"file",onChange:C,accept:"image/*",class:"w-full rounded-lg border-2 border-gray-300 bg-white p-3 text-gray-700 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-bold file:text-blue-700 hover:file:bg-blue-100"},null,32)])])])]),e("div",null,[t[25]||(t[25]=e("label",{class:"mb-2 block text-sm font-bold text-gray-800"},"Contenu de la page",-1)),s(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.content=o),rows:"8",class:"w-full rounded-lg border-2 border-gray-300 p-3 text-sm font-medium text-gray-900 focus:border-blue-600",placeholder:"Écrivez votre texte ici..."},null,512),[[d,l.value.content]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"mb-2 block text-sm font-bold text-gray-800"},"Contenu SEO (optionnel)",-1)),s(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.seo_content=o),rows:"4",class:"w-full rounded-lg border-2 border-gray-300 p-3 text-sm font-medium text-gray-900 focus:border-blue-600",placeholder:"Ajoutez du contenu supplémentaire pour améliorer le référencement naturel (SEO)..."},null,512),[[d,l.value.seo_content]]),t[27]||(t[27]=e("p",{class:"mt-1 text-xs text-gray-500"}," Ce contenu sera affiché en bas de page, avant le pied de page, pour améliorer le SEO. ",-1))]),e("div",Z,[t[45]||(t[45]=e("h3",{class:"mb-4 text-lg font-bold text-gray-800"}," Paramètres SEO Avancés ",-1)),e("div",ee,[e("div",null,[t[28]||(t[28]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Titre Meta",-1)),s(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.meta_title=o),type:"text",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600",placeholder:"Titre de la page pour les moteurs de recherche"},null,512),[[d,l.value.meta_title]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Mots-clés",-1)),s(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.keywords=o),type:"text",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600",placeholder:"Mots-clés séparés par des virgules"},null,512),[[d,l.value.keywords]])])]),e("div",te,[t[30]||(t[30]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Description Meta",-1)),s(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.value.meta_description=o),rows:"3",class:"w-full rounded-lg border-2 border-gray-300 p-3 text-sm font-medium text-gray-900 focus:border-blue-600",placeholder:"Description de la page pour les moteurs de recherche"},null,512),[[d,l.value.meta_description]])]),e("div",le,[t[37]||(t[37]=e("h4",{class:"text-md mb-3 font-bold text-gray-700"}," Open Graph (Facebook) ",-1)),e("div",oe,[e("div",null,[t[31]||(t[31]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Titre OG",-1)),s(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.value.og_title=o),type:"text",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600",placeholder:"Titre pour le partage sur Facebook"},null,512),[[d,l.value.og_title]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Type OG",-1)),s(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>l.value.og_type=o),class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600"},[...t[32]||(t[32]=[e("option",{value:"website"}," Website ",-1),e("option",{value:"article"}," Article ",-1),e("option",{value:"video"},"Video",-1)])],512),[[_,l.value.og_type]])])]),e("div",re,[t[34]||(t[34]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Description OG",-1)),s(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=o=>l.value.og_description=o),rows:"2",class:"w-full rounded-lg border-2 border-gray-300 p-3 text-sm font-medium text-gray-900 focus:border-blue-600",placeholder:"Description pour le partage sur Facebook"},null,512),[[d,l.value.og_description]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Image OG",-1)),e("div",se,[l.value.og_image_preview?(a(),i("div",ae,[e("img",{src:l.value.og_image_preview,alt:"OG Preview",class:"h-full w-full object-cover"},null,8,ie)])):p("",!0),e("div",de,[e("input",{type:"file",onChange:t[12]||(t[12]=(...o)=>r.handleOgImageChange&&r.handleOgImageChange(...o)),accept:"image/*",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600"},null,32),t[35]||(t[35]=e("p",{class:"mt-1 text-xs text-gray-500"}," Image pour le partage sur Facebook (PNG, JPG, GIF) ",-1))])])])]),e("div",ne,[t[44]||(t[44]=e("h4",{class:"text-md mb-3 font-bold text-gray-700"}," Twitter Card ",-1)),e("div",ue,[e("div",null,[t[39]||(t[39]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Type de carte",-1)),s(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>l.value.twitter_card=o),class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600"},[...t[38]||(t[38]=[e("option",{value:"summary"}," Summary ",-1),e("option",{value:"summary_large_image"}," Summary with Large Image ",-1),e("option",{value:"app"},"App",-1),e("option",{value:"player"}," Player ",-1)])],512),[[_,l.value.twitter_card]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Titre Twitter",-1)),s(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>l.value.twitter_title=o),type:"text",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600",placeholder:"Titre pour le partage sur Twitter"},null,512),[[d,l.value.twitter_title]])])]),e("div",be,[t[41]||(t[41]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Description Twitter",-1)),s(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=o=>l.value.twitter_description=o),rows:"2",class:"w-full rounded-lg border-2 border-gray-300 p-3 text-sm font-medium text-gray-900 focus:border-blue-600",placeholder:"Description pour le partage sur Twitter"},null,512),[[d,l.value.twitter_description]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Image Twitter",-1)),e("div",ge,[l.value.twitter_image_preview?(a(),i("div",me,[e("img",{src:l.value.twitter_image_preview,alt:"Twitter Preview",class:"h-full w-full object-cover"},null,8,pe)])):p("",!0),e("div",fe,[e("input",{type:"file",onChange:t[16]||(t[16]=(...o)=>r.handleTwitterImageChange&&r.handleTwitterImageChange(...o)),accept:"image/*",class:"w-full rounded-lg border-2 border-gray-300 p-3 font-medium text-gray-900 transition focus:border-blue-600"},null,32),t[42]||(t[42]=e("p",{class:"mt-1 text-xs text-gray-500"}," Image pour le partage sur Twitter (PNG, JPG, GIF) ",-1))])])])])]),e("div",ve,[u.value?(a(),i("span",{key:0,class:m(["animate-pulse text-lg font-bold",u.value.includes("✅")?"text-green-600":"text-red-600"])},g(u.value),3)):p("",!0),e("button",{onClick:U,disabled:f.value,class:"flex transform items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-700 px-8 py-3 font-bold text-white shadow-lg transition hover:scale-105 hover:from-blue-700 hover:to-indigo-800 disabled:scale-100 disabled:opacity-70"},[f.value?(a(),i("i",xe)):p("",!0),v(" "+g(f.value?"Sauvegarde...":n.value?"Mettre à jour":"Créer la page"),1)],8,ce)])])],2),e("div",null,[e("h3",ye,[t[46]||(t[46]=e("i",{class:"fa-solid fa-layer-group text-blue-600"},null,-1)),v(" Pages Existantes ("+g(x.value.length)+") ",1)]),e("div",we,[(a(!0),i(F,null,O(x.value,o=>(a(),i("div",{key:o.id,class:"group overflow-hidden rounded-xl border border-gray-200 bg-white shadow-md transition-all duration-300 hover:shadow-xl"},[e("div",he,[e("img",{src:o.thumbnail||"/images/hero-bg-1765171683.png",class:"h-full w-full object-cover transition duration-500 group-hover:scale-110"},null,8,ke),t[47]||(t[47]=e("div",{class:"absolute inset-x-0 top-0 h-16 bg-gradient-to-b from-black/50 to-transparent"},null,-1)),e("div",{class:m(["absolute top-3 right-3 flex items-center gap-1 rounded-full bg-white/90 px-3 py-1 text-xs font-bold uppercase shadow-sm backdrop-blur",o.category==="drone"?"text-purple-700":"text-blue-700"])},[e("i",{class:m(o.category==="drone"?"fa-solid fa-plane-up":"fa-solid fa-clock")},null,2),v(" "+g(o.category),1)],2)]),e("div",_e,[e("div",Te,[e("div",Ce,[e("i",{class:m(o.icon||"fa-solid fa-camera")},null,2)]),e("div",null,[e("h4",Ve,g(o.title),1),e("p",Ie," /"+g(o.slug),1)])]),e("div",Ue,[e("button",{onClick:k=>V(o),class:"flex flex-1 items-center justify-center gap-2 rounded-lg bg-blue-50 py-2.5 font-bold text-blue-700 transition hover:bg-blue-100"},[...t[48]||(t[48]=[e("i",{class:"fa-solid fa-pen-to-square"},null,-1),v(" Modifier ",-1)])],8,Pe),e("button",{onClick:k=>P(o.id),class:"rounded-lg bg-red-50 px-4 py-2.5 font-bold text-red-600 transition hover:bg-red-100"},[...t[49]||(t[49]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,je)])])]))),128))])])])])]),_:1}))}};export{Oe as default};
