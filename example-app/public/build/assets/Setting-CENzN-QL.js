import{C as k,r as p,o as h,j as C,k as V,d as e,c as v,e as g,b as f,t as m,g as b,f as d,v as n,h as x}from"./app-BPnb9YoN.js";import{_ as M}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-DBXsMluo.js";const N={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},U={class:"mx-auto max-w-5xl"},j={key:0,class:"mb-6 rounded-lg bg-green-100 p-4 text-center font-bold text-green-700 shadow-sm"},E={key:1,class:"mb-6 rounded-lg bg-red-100 p-4 text-center font-bold text-red-700 shadow-sm"},P={class:"grid grid-cols-1 gap-8 lg:grid-cols-2"},B={class:"h-fit overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-xl"},S={class:"space-y-5 p-8"},A=["disabled"],D={class:"h-fit overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-xl"},z={class:"space-y-5 p-8"},F=["disabled"],O={__name:"Setting",setup(T){const c=k(),t=p({name:"",email:"",password:"",password_confirmation:""}),s=p({name:"",email:"",password:""}),i=p(""),u=p(""),a=p(!1);h(()=>{const r=c.props.auth.user;r&&(t.value.name=r.name,t.value.email=r.email)});const w=async()=>{a.value=!0,i.value="",u.value="";try{await x.post("/api/settings/profile",t.value),i.value="✅ Profil mis à jour avec succès !",t.value.password="",t.value.password_confirmation=""}catch(r){console.error(r),u.value="❌ Erreur : Vérifiez les champs (mot de passe min 8 caractères)."}finally{a.value=!1}},y=async()=>{a.value=!0,i.value="",u.value="";try{await x.post("/api/settings/new-admin",s.value),i.value="✅ Nouvel administrateur ajouté !",s.value={name:"",email:"",password:""}}catch(r){console.error(r),u.value="❌ Erreur : Email déjà utilisé ou invalide."}finally{a.value=!1}};return(r,l)=>(f(),C(M,null,{default:V(()=>[e("div",N,[e("div",U,[l[19]||(l[19]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Paramètres"),e("p",{class:"mt-2 text-gray-600"}," Gérez votre profil et les accès administrateurs. ")],-1)),i.value?(f(),v("div",j,m(i.value),1)):g("",!0),u.value?(f(),v("div",E,m(u.value),1)):g("",!0),e("div",P,[e("div",B,[l[13]||(l[13]=e("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"},[e("h2",{class:"flex items-center gap-2 text-xl font-bold"},[e("i",{class:"fa-solid fa-user-gear"}),b(" Mon Profil ")])],-1)),e("div",S,[e("div",null,[l[7]||(l[7]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Nom",-1)),d(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.name=o),type:"text",class:"w-full rounded-lg border p-3 text-gray-500 transition focus:border-blue-500"},null,512),[[n,t.value.name]])]),e("div",null,[l[8]||(l[8]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Email",-1)),d(e("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.email=o),type:"email",class:"w-full rounded-lg border p-3 text-gray-500 transition focus:border-blue-500"},null,512),[[n,t.value.email]])]),l[11]||(l[11]=e("hr",{class:"my-4 border-gray-200"},null,-1)),l[12]||(l[12]=e("p",{class:"text-xs font-bold text-gray-500 uppercase"}," Changer le mot de passe (Optionnel) ",-1)),e("div",null,[l[9]||(l[9]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Nouveau mot de passe",-1)),d(e("input",{"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.password=o),type:"password",placeholder:"********",class:"w-full rounded-lg border p-3 text-gray-500 transition focus:border-blue-500"},null,512),[[n,t.value.password]])]),e("div",null,[l[10]||(l[10]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Confirmer mot de passe",-1)),d(e("input",{"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.password_confirmation=o),type:"password",placeholder:"********",class:"w-full rounded-lg border p-3 text-gray-500 transition focus:border-blue-500"},null,512),[[n,t.value.password_confirmation]])]),e("button",{onClick:w,disabled:a.value,class:"w-full transform rounded-lg bg-blue-600 py-3 font-bold text-white shadow-md transition hover:scale-[1.02] hover:bg-blue-700"},m(a.value?"Sauvegarde...":"Mettre à jour mon profil"),9,A)])]),e("div",D,[l[18]||(l[18]=e("div",{class:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white"},[e("h2",{class:"flex items-center gap-2 text-xl font-bold"},[e("i",{class:"fa-solid fa-user-shield"}),b(" Ajouter un Admin ")])],-1)),e("div",z,[l[17]||(l[17]=e("p",{class:"rounded border border-purple-100 bg-purple-50 p-3 text-sm text-gray-600"},[e("i",{class:"fa-solid fa-circle-info mr-1"}),b(" Cet utilisateur aura un "),e("strong",null,"accès complet"),b(" à ce tableau de bord (CMS). ")],-1)),e("div",null,[l[14]||(l[14]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Nom de l'admin",-1)),d(e("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>s.value.name=o),type:"text",placeholder:"ex: Marc Directeur",class:"w-full rounded-lg border p-3 text-gray-500 transition focus:border-purple-500"},null,512),[[n,s.value.name]])]),e("div",null,[l[15]||(l[15]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Email de connexion",-1)),d(e("input",{"onUpdate:modelValue":l[5]||(l[5]=o=>s.value.email=o),type:"email",placeholder:"marc@pix3i.com",class:"w-full rounded-lg border p-3 text-gray-500 transition focus:border-purple-500"},null,512),[[n,s.value.email]])]),e("div",null,[l[16]||(l[16]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Mot de passe provisoire",-1)),d(e("input",{"onUpdate:modelValue":l[6]||(l[6]=o=>s.value.password=o),type:"password",placeholder:"********",class:"w-full rounded-lg border p-3 text-gray-500 transition focus:border-purple-500"},null,512),[[n,s.value.password]])]),e("button",{onClick:y,disabled:a.value,class:"w-full transform rounded-lg bg-purple-600 py-3 font-bold text-white shadow-md transition hover:scale-[1.02] hover:bg-purple-700"},m(a.value?"Création...":"Créer l'administrateur"),9,F)])])])])])]),_:1}))}};export{O as default};
