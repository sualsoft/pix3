import{r as c,o as k,j as V,k as C,d as e,f as p,v,c as i,b as n,F as I,q as T,e as j,t as f,h as x}from"./app-CApJRcw1.js";import{_ as D}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-B1qxWliu.js";const L={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},N={class:"mx-auto max-w-5xl"},B={class:"overflow-hidden rounded-2xl bg-white shadow-xl"},U={class:"space-y-6 p-8"},A={class:"space-y-4"},E={class:"h-24 w-full flex-shrink-0 overflow-hidden rounded-lg bg-gray-200 md:w-32"},F=["src"],M={key:1,class:"flex h-full w-full items-center justify-center text-xs text-gray-400"},S={class:"w-full flex-1 space-y-3"},R={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Y=["value","onInput"],$=["onUpdate:modelValue"],q=["onChange"],z=["onClick"],G={class:"flex items-center justify-end gap-4 border-t pt-6"},P={key:0,class:"font-bold text-green-600"},H=["disabled"],Q={__name:"VideoSection",setup(J){const o=c({title:"",videos:[]}),r=c(""),u=c(!1),b=async()=>{try{const s=await x.get("/api/layout");s.data.timelapse_videos&&(o.value=s.data.timelapse_videos)}catch(s){console.error(s)}},g=s=>{const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,l=s.match(t);return l&&l[2].length===11?l[2]:s},m=(s,t)=>{o.value.videos[s].youtubeId=g(t.target.value)},h=(s,t)=>{const l=s.target.files[0];if(l){const d=new FileReader;d.onload=a=>o.value.videos[t].thumbnail=a.target.result,d.readAsDataURL(l)}},y=()=>{o.value.videos.push({youtubeId:"",thumbnail:"",alt:"Nouvelle vidéo"})},_=s=>{o.value.videos.splice(s,1)},w=async()=>{u.value=!0;try{await x.post("/api/settings/timelapse-videos",o.value),r.value="✅ Vidéos sauvegardées !"}catch{r.value="❌ Erreur."}finally{u.value=!1}};return k(()=>b()),(s,t)=>(n(),V(D,null,{default:C(()=>[e("div",L,[e("div",N,[t[7]||(t[7]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-900"}," Vidéos Timelapse "),e("p",{class:"text-gray-600"},' Gérez la grille de vidéos "Notre portefeuille". ')],-1)),e("div",B,[e("div",{class:"flex items-center justify-between bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"},[t[1]||(t[1]=e("h2",{class:"text-xl font-bold"},"Liste des Vidéos",-1)),e("button",{onClick:y,class:"rounded bg-white/20 px-3 py-1 text-sm font-bold hover:bg-white/30"}," + Ajouter ")]),e("div",U,[e("div",null,[t[2]||(t[2]=e("label",{class:"mb-2 block font-bold text-gray-700"},"Titre de la section",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.title=l),type:"text",class:"w-full rounded-lg border p-3 text-gray-600"},null,512),[[v,o.value.title]])]),e("div",A,[(n(!0),i(I,null,T(o.value.videos,(l,d)=>(n(),i("div",{key:d,class:"flex flex-col items-start gap-4 rounded-xl border bg-gray-50 p-4 md:flex-row"},[e("div",E,[l.thumbnail?(n(),i("img",{key:0,src:l.thumbnail,class:"h-full w-full object-cover"},null,8,F)):(n(),i("div",M," No Image "))]),e("div",S,[e("div",R,[e("div",null,[t[3]||(t[3]=e("label",{class:"text-xs font-bold text-gray-500 uppercase"},"YouTube Link/ID",-1)),e("input",{value:l.youtubeId,onInput:a=>m(d,a),type:"text",class:"w-full rounded border p-2 text-sm text-gray-600",placeholder:"Paste YouTube link here"},null,40,Y)]),e("div",null,[t[4]||(t[4]=e("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Titre Alt",-1)),p(e("input",{"onUpdate:modelValue":a=>l.alt=a,type:"text",class:"w-full rounded border p-2 text-sm text-gray-600"},null,8,$),[[v,l.alt]])])]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Changer Miniature",-1)),e("input",{type:"file",onChange:a=>h(a,d),class:"w-full text-sm"},null,40,q)])]),e("button",{onClick:a=>_(d),class:"p-2 text-red-500 hover:text-red-700"},[...t[6]||(t[6]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,z)]))),128))]),e("div",G,[r.value?(n(),i("span",P,f(r.value),1)):j("",!0),e("button",{onClick:w,disabled:u.value,class:"rounded-lg bg-blue-600 px-6 py-3 font-bold text-white"},f(u.value?"...":"Sauvegarder"),9,H)])])])])])]),_:1}))}};export{Q as default};
