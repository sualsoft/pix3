import{r as u,o as x,i as h,j as _,d as e,c as r,f as p,v,C as w,b as a,e as k,t as c,F as j,p as C,g as y}from"./app-bnrJlte7.js";import{_ as T}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-Hs_Z3ZV1.js";const S={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},V={class:"mx-auto max-w-6xl"},D={class:"mb-8 overflow-hidden rounded-2xl bg-white shadow-xl"},E={class:"space-y-6 p-6 md:p-8"},F={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},B={class:"flex items-center justify-end gap-4 border-t pt-4"},L={key:0,class:"font-bold text-blue-600"},U=["disabled"],A={key:0,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},I={class:"group relative h-48 bg-gray-100"},M=["src"],$=["src"],G=["src"],N={class:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 transition group-hover:opacity-100"},P=["onClick"],Y={class:"p-4"},z={class:"font-bold text-gray-800"},q={class:"rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-800"},H={key:1,class:"py-12 text-center text-gray-500"},R={__name:"Items",setup(J){const n=u([]),i=u(""),d=u(!1),l=u({title:"",category:"",type:"image",url:"",file:null}),g=async()=>{try{const s=await y.get("/api/portfolio");n.value=s.data}catch(s){console.error("Error loading data:",s)}},b=async()=>{d.value=!0,i.value="";const s=new FormData;s.append("title",l.value.title||"Sans titre"),s.append("category",l.value.category||"Général"),s.append("type",l.value.type),(l.value.type==="youtube"||l.value.url)&&s.append("url",l.value.url||""),l.value.file&&s.append("file",l.value.file);try{await y.post("/api/portfolio",s,{headers:{"Content-Type":"multipart/form-data"}}),i.value="✅ Projet ajouté !",l.value={title:"",category:"",type:"image",url:"",file:null},g()}catch(t){i.value="❌ Erreur de sauvegarde.",console.error(t)}finally{d.value=!1}},f=s=>{l.value.file=s.target.files[0]},m=async s=>{if(confirm("Supprimer ce projet ?"))try{await y.delete(`/api/portfolio/${s}`),g()}catch{alert("Erreur suppression")}};return x(()=>{g()}),(s,t)=>(a(),h(T,null,{default:_(()=>[e("div",S,[e("div",V,[t[10]||(t[10]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-800"}," Gestionnaire de Portefeuille ")],-1)),e("div",D,[t[9]||(t[9]=e("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"},[e("h2",{class:"text-2xl font-bold"},"Ajouter un projet")],-1)),e("div",E,[e("div",F,[e("div",null,[t[4]||(t[4]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Titre",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.title=o),type:"text",placeholder:"Titre du projet",class:"w-full rounded-lg border p-3 text-gray-600"},null,512),[[v,l.value.title]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Catégorie",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.category=o),type:"text",placeholder:"Drone, Timelapse...",class:"w-full rounded-lg border p-3 text-gray-600"},null,512),[[v,l.value.category]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Type",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.type=o),class:"w-full rounded-lg border p-3 text-gray-600"},[...t[6]||(t[6]=[e("option",{value:"image"},"Image",-1),e("option",{value:"video"},"Vidéo",-1),e("option",{value:"youtube"},"YouTube",-1)])],512),[[w,l.value.type]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Fichier / Lien",-1)),l.value.type==="youtube"?p((a(),r("input",{key:0,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.url=o),type:"text",placeholder:"Lien YouTube",class:"w-full rounded-lg border p-3 text-gray-600"},null,512)),[[v,l.value.url]]):(a(),r("input",{key:1,type:"file",onChange:f,class:"w-full rounded-lg border p-3 text-gray-600"},null,32))])]),e("div",B,[i.value?(a(),r("span",L,c(i.value),1)):k("",!0),e("button",{onClick:b,disabled:d.value,class:"rounded-lg bg-blue-600 px-6 py-3 font-bold text-white transition hover:bg-blue-700"},c(d.value?"Sauvegarde...":"Enregistrer"),9,U)])])]),n.value&&n.value.length>0?(a(),r("div",A,[(a(!0),r(j,null,C(n.value,o=>(a(),r("div",{key:o.id,class:"overflow-hidden rounded-xl border bg-white shadow"},[e("div",I,[o.type==="image"?(a(),r("img",{key:0,src:o.src,class:"h-full w-full object-cover"},null,8,M)):o.type==="youtube"?(a(),r("iframe",{key:1,src:o.src,class:"h-full w-full"},null,8,$)):(a(),r("video",{key:2,src:o.src,class:"h-full w-full object-cover"},null,8,G)),e("div",N,[e("button",{onClick:K=>m(o.id),class:"rounded-full bg-red-600 px-4 py-2 font-bold text-white"}," Supprimer ",8,P)])]),e("div",Y,[e("h3",z,c(o?.title||"Sans titre"),1),e("span",q,c(o?.category),1)])]))),128))])):(a(),r("div",H," Aucun projet trouvé. Ajoutez-en un ! "))])])]),_:1}))}};export{R as default};
