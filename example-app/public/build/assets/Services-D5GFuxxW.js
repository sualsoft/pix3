import{r as u,o as A,i as L,j as T,d as e,c as n,e as m,q as E,b as r,F as U,p as V,t as c,n as y,f as p,v as x,C as $}from"./app-bnrJlte7.js";import{_ as I}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-Hs_Z3ZV1.js";const M={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},N={class:"mx-auto max-w-7xl"},B={class:"overflow-hidden rounded-2xl bg-white shadow-xl"},D={class:"flex flex-col items-center justify-between gap-4 bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white sm:flex-row"},F={class:"p-6 md:p-8"},z={key:0,class:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3"},O={class:"relative mb-4 h-40 w-full overflow-hidden rounded-lg border bg-gray-100"},R=["src"],q={class:"absolute top-2 right-2 rounded bg-black/60 px-2 py-1 text-[10px] text-white"},G={class:"flex-grow"},W={class:"mb-2 text-lg font-bold text-gray-900"},J={class:"line-clamp-3 text-sm leading-relaxed text-gray-600"},P={class:"mt-5 flex gap-3 border-t border-gray-100 pt-4"},H=["onClick"],K=["onClick"],Q={key:1,class:"rounded-xl border-2 border-dashed border-gray-200 bg-gray-50 py-16 text-center text-gray-500"},X={class:"mt-8 flex flex-col items-center justify-end gap-4 border-t pt-6 sm:flex-row"},Y=["disabled"],Z={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm"},ee={class:"flex max-h-[90vh] w-full max-w-lg flex-col overflow-hidden rounded-2xl bg-white shadow-2xl"},te={class:"flex items-center justify-between border-b bg-gray-100 px-6 py-4"},le={class:"text-xl font-bold text-gray-800"},oe={class:"space-y-5 overflow-y-auto p-6"},se={class:"mb-3 flex border-b border-gray-200"},re={key:0,class:"flex items-center gap-4"},ae={key:1},ne={key:2,class:"mt-3 h-32 w-full overflow-hidden rounded-lg border bg-gray-100"},ie=["src"],de={class:"flex justify-end gap-3 border-t bg-gray-50 px-6 py-4"},be={__name:"Services",setup(ue){const a=u([]),v=u(!1),i=u(""),g=u(!1),f=u(-1),d=u("upload"),o=u({title:"",description:"",link:"",image:"",span:"lg:col-span-1"}),w=async()=>{try{const t=await(await fetch("/api/layout")).json();t.home_services&&(a.value=t.home_services)}catch(s){console.error("Error loading data:",s)}},h=(s=-1)=>{f.value=s,i.value="",s===-1?(o.value={title:"",description:"",link:"/drone",image:"",span:"lg:col-span-1"},d.value="upload"):(o.value={...a.value[s]},o.value.image.startsWith("http")?d.value="url":d.value="upload"),g.value=!0},k=s=>{const t=s.target.files[0];if(t){const l=new FileReader;l.onload=b=>{o.value.image=b.target.result},l.readAsDataURL(t)}},_=()=>{f.value===-1?a.value.push({...o.value}):a.value[f.value]={...o.value},g.value=!1},C=s=>{confirm("Are you sure you want to delete this service?")&&a.value.splice(s,1)},S=async()=>{v.value=!0,i.value="";try{const s=await fetch("/api/settings/services",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a.value)});if(s.ok){const t=await s.json();a.value=t.data,i.value="✅ All Services Saved!"}else i.value="❌ Error Saving."}catch(s){console.error(s),i.value="❌ Network Error"}finally{v.value=!1}};return A(()=>{w()}),(s,t)=>(r(),L(I,null,{default:T(()=>[e("div",M,[e("div",N,[t[13]||(t[13]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-800 md:text-4xl"}," Gestion des Services "),e("p",{class:"mt-2 text-gray-600"}," Gestion des cartes dans votre section Services ")],-1)),e("div",B,[e("div",D,[t[11]||(t[11]=e("div",null,[e("h2",{class:"text-2xl font-bold"}," Liste des Services "),e("p",{class:"mt-1 opacity-90"}," Services actifs actuels ")],-1)),e("button",{onClick:t[0]||(t[0]=l=>h(-1)),class:"flex items-center gap-2 rounded-lg bg-white px-6 py-2 font-bold text-blue-600 shadow transition hover:bg-gray-100"},[...t[10]||(t[10]=[e("span",{class:"text-xl"},"+",-1),E(" Ajouter un service ",-1)])])]),e("div",F,[a.value.length>0?(r(),n("div",z,[(r(!0),n(U,null,V(a.value,(l,b)=>(r(),n("div",{key:b,class:"flex h-full flex-col rounded-xl border border-gray-200 bg-white p-4 shadow-sm transition hover:shadow-md"},[e("div",O,[e("img",{src:l.image,class:"h-full w-full object-cover",alt:"Service Image"},null,8,R),e("span",q,c(l.span==="lg:col-span-1"?"Standard":"Wide"),1)]),e("div",G,[e("h3",W,c(l.title),1),e("p",J,c(l.description),1)]),e("div",P,[e("button",{onClick:j=>h(b),class:"flex-1 rounded-lg bg-blue-50 py-2 font-semibold text-blue-600 transition hover:bg-blue-100"}," Editer ",8,H),e("button",{onClick:j=>C(b),class:"flex-1 rounded-lg bg-red-50 py-2 font-semibold text-red-600 transition hover:bg-red-100"}," Supprimer ",8,K)])]))),128))])):(r(),n("div",Q,[...t[12]||(t[12]=[e("p",{class:"text-lg"},"Aucun service trouvé.",-1),e("p",{class:"text-sm"}," Cliquez sur « Ajouter un service » pour en créer un. ",-1)])])),e("div",X,[i.value?(r(),n("span",{key:0,class:y(["rounded-lg px-4 py-2 font-bold",i.value.includes("✅")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},c(i.value),3)):m("",!0),e("button",{onClick:S,disabled:v.value,class:"w-full rounded-lg bg-gradient-to-r from-blue-600 to-indigo-700 px-8 py-3 font-bold text-white shadow-lg transition hover:opacity-90 disabled:opacity-50 sm:w-auto"},c(v.value?"Économie...":"Enregistrer Toutes Les Modifications"),9,Y)])])])])]),g.value?(r(),n("div",Z,[e("div",ee,[e("div",te,[e("h3",le,c(f.value===-1?"Ajouter un nouveau service":"Editer le service"),1),e("button",{onClick:t[1]||(t[1]=l=>g.value=!1),class:"text-2xl text-gray-500 transition hover:text-gray-800"}," × ")]),e("div",oe,[e("div",null,[t[14]||(t[14]=e("label",{class:"mb-1 block text-sm font-bold text-gray-700"},"Titre du service",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.title=l),type:"text",class:"w-full rounded-lg border border-gray-300 px-4 py-2 text-black outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,o.value.title]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"mb-2 block text-sm font-bold text-gray-700"},"Image du service",-1)),e("div",se,[e("button",{onClick:t[3]||(t[3]=l=>d.value="upload"),class:y(["px-4 py-2 text-sm font-medium transition",d.value==="upload"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"])}," Télécharger le fichier ",2),e("button",{onClick:t[4]||(t[4]=l=>d.value="url"),class:y(["px-4 py-2 text-sm font-medium transition",d.value==="url"?"border-b-2 border-blue-600 text-blue-600":"text-black hover:text-gray-700"])}," URL de l'image ",2)]),d.value==="upload"?(r(),n("div",re,[e("input",{type:"file",onChange:k,accept:"image/*",class:"text-sm text-black file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"},null,32)])):(r(),n("div",ae,[p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.image=l),type:"text",placeholder:"https://example.com/image.jpg",class:"w-full rounded-lg border border-gray-300 px-4 py-2 text-sm text-black outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,o.value.image]])])),o.value.image?(r(),n("div",ne,[e("img",{src:o.value.image,class:"h-full w-full object-cover"},null,8,ie)])):m("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"mb-1 block text-sm font-bold text-gray-700"},"Taille de la carte",-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.span=l),class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-black outline-none focus:ring-2 focus:ring-blue-500"},[...t[16]||(t[16]=[e("option",{value:"lg:col-span-1"}," Standard (1 Column) ",-1),e("option",{value:"md:col-span-2"}," Large (2 Columns) ",-1)])],512),[[$,o.value.span]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"mb-1 block text-sm font-bold text-gray-700"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.description=l),rows:"4",class:"w-full rounded-lg border border-gray-300 px-4 py-2 text-black outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,o.value.description]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"mb-1 block text-sm font-bold text-gray-700"},"Lien du bouton",-1)),p(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.link=l),type:"text",placeholder:"/drone",class:"w-full rounded-lg border border-gray-300 px-4 py-2 text-black outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,o.value.link]])])]),e("div",de,[e("button",{onClick:t[9]||(t[9]=l=>g.value=!1),class:"rounded-lg px-5 py-2 font-medium text-gray-700 transition hover:bg-gray-200"}," Annuler "),e("button",{onClick:_,class:"rounded-lg bg-blue-600 px-5 py-2 font-bold text-white transition hover:bg-blue-700"}," Enregistrer le service ")])])])):m("",!0)]),_:1}))}};export{be as default};
