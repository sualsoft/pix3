import{r as c,o as k,j as V,k as C,d as e,f as v,v as p,c as r,b as d,F as I,q as D,e as j,t as x,h as f}from"./app-u3oTKOlE.js";import{_ as T}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-nmJaGcP0.js";const L={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},B={class:"mx-auto max-w-5xl"},N={class:"overflow-hidden rounded-2xl bg-white shadow-xl"},U={class:"space-y-6 p-8"},A={class:"space-y-4"},E={class:"h-24 w-full flex-shrink-0 overflow-hidden rounded-lg bg-gray-200 md:w-32"},F=["src"],M={key:1,class:"flex h-full w-full items-center justify-center text-xs text-gray-400"},S={class:"w-full flex-1 space-y-3"},R={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Y=["value","onInput"],$=["onUpdate:modelValue"],q=["onChange"],z=["onClick"],G={class:"flex items-center justify-end gap-4 border-t pt-6"},P={key:0,class:"font-bold text-green-600"},H=["disabled"],Q={__name:"VideoSection",setup(J){const o=c({title:"",videos:[]}),i=c(""),u=c(!1),g=async()=>{try{const s=await f.get("/api/layout");s.data.drone_videos&&(o.value=s.data.drone_videos)}catch(s){console.error(s)}},b=s=>{const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,l=s.match(t);return l&&l[2].length===11?l[2]:s},m=(s,t)=>{o.value.videos[s].youtubeId=b(t.target.value)},h=(s,t)=>{const l=s.target.files[0];if(l){const n=new FileReader;n.onload=a=>o.value.videos[t].thumbnail=a.target.result,n.readAsDataURL(l)}},y=()=>{o.value.videos.push({youtubeId:"",thumbnail:"",alt:"Nouvelle vidéo"})},_=s=>{o.value.videos.splice(s,1)},w=async()=>{u.value=!0;try{await f.post("/api/settings/drone-videos",o.value),i.value="✅ Vidéos Drone sauvegardées !"}catch{i.value="❌ Erreur."}finally{u.value=!1}};return k(()=>g()),(s,t)=>(d(),V(T,null,{default:C(()=>[e("div",L,[e("div",B,[t[7]||(t[7]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-900"}," Vidéos Drone "),e("p",{class:"text-gray-600"}," Gérez la grille de vidéos pour la page Drone. ")],-1)),e("div",N,[e("div",{class:"flex items-center justify-between bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"},[t[1]||(t[1]=e("h2",{class:"text-xl font-bold"},"Liste des Vidéos",-1)),e("button",{onClick:y,class:"rounded bg-white/20 px-3 py-1 text-sm font-bold hover:bg-white/30"}," + Ajouter ")]),e("div",U,[e("div",null,[t[2]||(t[2]=e("label",{class:"mb-2 block font-bold text-gray-700"},"Titre de la section",-1)),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.title=l),type:"text",class:"w-full rounded-lg border p-3 text-gray-500"},null,512),[[p,o.value.title]])]),e("div",A,[(d(!0),r(I,null,D(o.value.videos,(l,n)=>(d(),r("div",{key:n,class:"flex flex-col items-start gap-4 rounded-xl border bg-gray-50 p-4 md:flex-row"},[e("div",E,[l.thumbnail?(d(),r("img",{key:0,src:l.thumbnail,class:"h-full w-full object-cover"},null,8,F)):(d(),r("div",M," No Image "))]),e("div",S,[e("div",R,[e("div",null,[t[3]||(t[3]=e("label",{class:"text-xs font-bold text-gray-500 uppercase"},"YouTube Link/ID",-1)),e("input",{value:l.youtubeId,onInput:a=>m(n,a),type:"text",class:"w-full rounded border p-2 text-sm text-gray-600",placeholder:"Paste YouTube link here"},null,40,Y)]),e("div",null,[t[4]||(t[4]=e("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Titre Alt",-1)),v(e("input",{"onUpdate:modelValue":a=>l.alt=a,type:"text",class:"w-full rounded border p-2 text-sm text-gray-500"},null,8,$),[[p,l.alt]])])]),e("div",null,[t[5]||(t[5]=e("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Changer Miniature",-1)),e("input",{type:"file",onChange:a=>h(a,n),class:"w-full text-sm"},null,40,q)])]),e("button",{onClick:a=>_(n),class:"p-2 text-red-500 hover:text-red-700"},[...t[6]||(t[6]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,z)]))),128))]),e("div",G,[i.value?(d(),r("span",P,x(i.value),1)):j("",!0),e("button",{onClick:w,disabled:u.value,class:"rounded-lg bg-blue-600 px-6 py-3 font-bold text-white"},x(u.value?"...":"Sauvegarder"),9,H)])])])])])]),_:1}))}};export{Q as default};
