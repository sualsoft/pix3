import{r as u,o as y,j as x,k as h,d as e,f as w,v as k,t as c,c as d,b as n,F as _,q as j,e as p,n as C,g as z}from"./app-CT--BO7Q.js";import{_ as T}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-TjZqD5PX.js";const B={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},M={class:"mx-auto max-w-6xl"},N={class:"overflow-hidden rounded-2xl bg-white shadow-xl"},R={class:"space-y-8 p-6 md:p-8"},S={class:"mb-3 block flex justify-between text-sm font-semibold text-gray-700"},V={class:"grid grid-cols-2 gap-4 md:grid-cols-4 lg:grid-cols-5"},q={class:"group flex aspect-square cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 transition hover:border-blue-400 hover:bg-blue-50"},A=["src"],D={class:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 transition group-hover:opacity-100"},E=["onClick"],G={class:"mt-8 flex flex-col items-center justify-end gap-4 border-t border-gray-100 pt-6 sm:flex-row"},L=["disabled"],F={key:0,class:"mr-2 h-5 w-5 animate-spin",viewBox:"0 0 24 24"},P={__name:"Gallery",setup(I){const s=u({title:"",images:[]}),l=u(""),a=u(!1),g=async()=>{try{const t=await(await fetch("/api/layout")).json();t.home_gallery&&(s.value=t.home_gallery)}catch(o){console.error(o)}},f=o=>{const t=o.target.files;if(t)for(let r=0;r<t.length;r++){const i=new FileReader;i.onload=m=>{s.value.images.push(m.target.result)},i.readAsDataURL(t[r])}},b=o=>{confirm("Remove this image?")&&s.value.images.splice(o,1)},v=async()=>{a.value=!0,l.value="";try{const o=await fetch("/api/settings/gallery",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s.value)});if(o.ok){const t=await o.json();t.data&&(s.value=t.data),l.value="✅ Gallery Saved!"}else l.value="❌ Error Saving."}catch{l.value="❌ Network Error"}finally{a.value=!1}};return y(()=>g()),(o,t)=>(n(),x(T,null,{default:h(()=>[e("div",B,[e("div",M,[t[8]||(t[8]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-800 md:text-4xl"}," Gestionnaire de galerie "),e("p",{class:"mt-2 text-gray-600"}," Gérez la grille de photos de votre page d'accueil. ")],-1)),e("div",N,[t[7]||(t[7]=e("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"},[e("h2",{class:"text-2xl font-bold"},"Éditer les Photos"),e("p",{class:"mt-1 opacity-90"}," Ajoutez, supprimez ou réorganisez vos images de galerie. ")],-1)),e("div",R,[e("div",null,[t[1]||(t[1]=e("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Titre de la galerie",-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.title=r),type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 text-gray-900 placeholder-gray-400 transition duration-200 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"},null,512),[[k,s.value.title]])]),e("div",null,[e("label",S,[e("span",null,"Images ("+c(s.value.images.length)+")",1),t[2]||(t[2]=e("span",{class:"font-normal text-gray-400"},"Cliquez sur 'Télécharger' pour ajouter plus",-1))]),e("div",V,[e("label",q,[t[3]||(t[3]=e("div",{class:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-sm transition group-hover:scale-110"},[e("span",{class:"text-2xl font-bold text-blue-600"},"+")],-1)),t[4]||(t[4]=e("span",{class:"text-sm font-medium text-gray-500 group-hover:text-blue-600"},"Télécharger",-1)),e("input",{type:"file",multiple:"",accept:"image/*",class:"hidden",onChange:f},null,32)]),(n(!0),d(_,null,j(s.value.images,(r,i)=>(n(),d("div",{key:i,class:"group relative aspect-square overflow-hidden rounded-xl border border-gray-200 bg-gray-100 shadow-sm"},[e("img",{src:r,class:"h-full w-full object-cover"},null,8,A),e("div",D,[e("button",{onClick:m=>b(i),class:"transform rounded-full bg-red-600 p-2 text-white shadow-lg transition hover:scale-110 hover:bg-red-700",title:"Remove Image"},[...t[5]||(t[5]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,E)])]))),128))])]),e("div",G,[l.value?(n(),d("div",{key:0,class:C(["font-bold",l.value.includes("✅")?"text-green-600":"text-red-600"])},c(l.value),3)):p("",!0),e("button",{onClick:g,class:"rounded-lg border border-gray-300 px-6 py-3 font-medium text-gray-700 transition hover:bg-gray-50"}," Réinitialiser "),e("button",{onClick:v,disabled:a.value,class:"flex items-center justify-center rounded-lg bg-gradient-to-r from-blue-600 to-indigo-700 px-8 py-3 font-bold text-white shadow-lg transition hover:from-blue-700 hover:to-indigo-800 disabled:opacity-70"},[a.value?(n(),d("svg",F,[...t[6]||(t[6]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):p("",!0),z(" "+c(a.value?"Économie...":"Enregistrer la galerie"),1)],8,L)])])])])])]),_:1}))}};export{P as default};
