import{r,o as w,j as _,k as h,d as l,w as k,c as f,e as D,f as u,v as g,b as c,t as m,n as S}from"./app-DeuKnPJx.js";import{_ as j}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-BR4GEVq0.js";const U={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},C={class:"mx-auto max-w-6xl"},E={class:"overflow-hidden rounded-2xl bg-white shadow-xl"},N={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},V={class:"md:col-span-2"},L={class:"md:col-span-2"},T={class:"md:col-span-2"},B={class:"md:col-span-2"},M={class:"flex items-center gap-4"},P={class:"flex h-20 w-20 items-center justify-center overflow-hidden rounded border bg-gray-50"},A=["src"],F={key:1,class:"text-xs text-gray-400"},O={class:"md:col-span-2"},R={class:"mt-8 flex justify-end"},z=["disabled"],H={__name:"General",setup(G){const o=r({phone:"",email:"",address:"",description:"",logo_url:""}),a=r(""),n=r(!1),i=r(null),p=r(null),v=async()=>{try{const e=await(await fetch("/api/layout")).json();e.general&&(o.value.phone=e.general.phone||"",o.value.email=e.general.email||"",o.value.address=e.general.address||"",o.value.description=e.general.description||"",o.value.logo_url=e.general.logo_url||"",e.general.logo_url&&(i.value=e.general.logo_url))}catch(t){console.error("Error loading data",t)}},x=t=>{const e=t.target.files[0];if(e){p.value=e;const s=new FileReader;s.onload=d=>{i.value=d.target.result},s.readAsDataURL(e)}},y=async()=>{n.value=!0,a.value="";try{let t=o.value.logo_url;if(p.value){const d=new FormData;d.append("logo",p.value);const b=await fetch("/api/settings/upload-logo",{method:"POST",body:d});b.ok&&(t=(await b.json()).logo_url)}const e={...o.value,logo_url:t};(await fetch("/api/settings/general",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)})).ok?(a.value="✅ Saved Successfully!",o.value.logo_url=t):a.value="❌ Error Saving."}catch(t){console.error(t),a.value="❌ Network Error"}finally{n.value=!1}};return w(()=>{v()}),(t,e)=>(c(),_(j,null,{default:h(()=>[l("div",U,[l("div",C,[e[11]||(e[11]=l("div",{class:"mb-8 text-center"},[l("h1",{class:"text-3xl font-bold text-gray-800 md:text-4xl"}," Paramètres généraux "),l("p",{class:"mt-2 text-gray-600"}," Gérez les informations de contact de votre site web ")],-1)),l("div",E,[e[10]||(e[10]=l("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"},[l("h2",{class:"text-2xl font-bold"}," Modifier les informations ")],-1)),l("form",{onSubmit:k(y,["prevent"]),class:"p-6 md:p-8"},[l("div",N,[l("div",V,[e[4]||(e[4]=l("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Numéro de téléphone",-1)),u(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.phone=s),type:"tel",class:"w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"},null,512),[[g,o.value.phone]])]),l("div",L,[e[5]||(e[5]=l("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"E-mail",-1)),u(l("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.email=s),type:"email",class:"w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"},null,512),[[g,o.value.email]])]),l("div",T,[e[6]||(e[6]=l("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Adresse",-1)),u(l("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.address=s),type:"text",class:"w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"},null,512),[[g,o.value.address]])]),l("div",B,[e[7]||(e[7]=l("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Logo",-1)),l("div",M,[l("div",P,[i.value?(c(),f("img",{key:0,src:i.value,class:"h-full w-full object-contain"},null,8,A)):(c(),f("span",F,"No Logo"))]),l("input",{type:"file",onChange:x,accept:"image/*",class:"block w-full text-sm text-slate-500 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"},null,32)]),e[8]||(e[8]=l("p",{class:"mt-1 text-sm text-gray-500"}," Téléchargements dans le dossier public ",-1))]),l("div",O,[e[9]||(e[9]=l("label",{class:"mb-2 block text-sm font-semibold text-gray-700"},"Description",-1)),u(l("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.description=s),rows:"3",class:"w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"},null,512),[[g,o.value.description]])])]),l("div",R,[l("button",{type:"submit",disabled:n.value,class:"rounded-lg bg-blue-600 px-6 py-3 font-bold text-white shadow-lg transition hover:bg-blue-700 disabled:opacity-50"},m(n.value?"Économie...":"Enregistrer les paramètres"),9,z)]),a.value?(c(),f("div",{key:0,class:S(["mt-4 text-center font-bold",a.value.includes("✅")?"text-green-600":"text-red-600"])},m(a.value),3)):D("",!0)],32)])])])]),_:1}))}};export{H as default};
