import{r as u,o as k,j,k as V,d as e,g as D,f as a,v as p,H as F,c as d,J as m,b as r,e as x,t as n,F as C,q as U,h as v}from"./app-CApJRcw1.js";import{_ as T}from"./DashboardLayout.vue_vue_type_script_setup_true_lang-B1qxWliu.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"min-h-screen w-full bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8"},B={class:"mx-auto max-w-6xl"},E={class:"mb-8 overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-xl"},I={class:"space-y-6 p-8"},N={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},z={class:"rounded-xl border border-gray-200 bg-gray-50 p-6"},L={class:"mb-4 flex gap-4"},A={class:"flex cursor-pointer items-center gap-2"},$={class:"flex cursor-pointer items-center gap-2"},G={key:0,class:"animate-fade-in"},P={key:1,class:"animate-fade-in"},Q={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},W={key:0},q={class:"flex items-center gap-2"},H={class:"flex items-end gap-4"},J={class:"w-1/3"},K={class:"flex flex-1 items-center justify-end gap-4"},O={key:0,class:"animate-pulse font-bold text-blue-600"},R=["disabled"],X={class:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-xl"},Y={class:"flex items-center justify-between border-b border-gray-100 bg-gray-50 p-6"},Z={class:"text-xl font-bold text-gray-800"},ee={class:"grid grid-cols-1 gap-6 p-6 md:grid-cols-2 lg:grid-cols-3"},te={class:"relative h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg bg-gray-100"},le=["src"],se={key:0,class:"absolute inset-0 flex items-center justify-center bg-black/30"},oe={class:"flex min-w-0 flex-1 flex-col justify-between"},ae=["title"],re={class:"mt-1 text-xs text-gray-500"},de={class:"mt-2 flex items-end justify-between"},ie={class:"rounded bg-gray-100 px-2 py-0.5 text-[10px] font-bold tracking-wider text-gray-600 uppercase"},ne=["onClick"],ue={__name:"User",setup(pe){const g=u([]),b=u(""),f=u(!1),i=u("upload"),l=u({name:"",date:new Date().toISOString().slice(0,10),type:"video",badge:"NEW",youtube_id:"",external_link:"",thumbnail_file:null,download_file:null}),c=async()=>{try{const o=await v.get("/api/user-project");g.value=o.data.files}catch(o){console.error(o)}},y=o=>l.value.thumbnail_file=o.target.files[0],_=o=>l.value.download_file=o.target.files[0],h=async()=>{f.value=!0;const o=new FormData;o.append("name",l.value.name),o.append("date",l.value.date),o.append("type",l.value.type),o.append("badge",l.value.badge),l.value.youtube_id&&o.append("youtube_id",l.value.youtube_id),i.value==="link"?o.append("external_link",l.value.external_link):l.value.download_file&&o.append("download_file",l.value.download_file),l.value.thumbnail_file&&o.append("thumbnail_file",l.value.thumbnail_file);try{await v.post("/api/user-project/file",o,{headers:{"Content-Type":"multipart/form-data"}}),b.value="✅ Fichier ajouté !",c(),l.value.name="",l.value.youtube_id="",l.value.external_link=""}catch(t){b.value="❌ Erreur ajout fichier",console.error(t)}finally{f.value=!1}},w=async o=>{confirm("Supprimer ce fichier ?")&&(await v.delete(`/api/user-project/file/${o}`),c())};return k(()=>c()),(o,t)=>(r(),j(T,null,{default:V(()=>[e("div",M,[e("div",B,[t[24]||(t[24]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold text-gray-900"}," Espace Client "),e("p",{class:"mt-2 text-gray-500"}," Gérez les fichiers téléchargeables pour votre client. ")],-1)),e("div",E,[t[21]||(t[21]=e("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white"},[e("h2",{class:"flex items-center gap-2 text-xl font-bold"},[e("i",{class:"fa-solid fa-file-circle-plus"}),D(" Ajouter un Fichier ")])],-1)),e("div",I,[e("div",N,[e("div",null,[t[8]||(t[8]=e("label",{class:"mb-2 block text-xs font-bold text-gray-500 uppercase"},"Nom du Fichier",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.name=s),type:"text",placeholder:"ex: Timelapse Semaine 4",class:"w-full rounded-lg border border-gray-300 p-3 text-gray-700 focus:border-blue-500"},null,512),[[p,l.value.name]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"mb-2 block text-xs font-bold text-gray-500 uppercase"},"Date",-1)),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.date=s),type:"date",class:"w-full rounded-lg border border-gray-300 p-3 text-gray-700 focus:border-blue-500"},null,512),[[p,l.value.date]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"mb-2 block text-xs font-bold text-gray-500 uppercase"},"Type",-1)),a(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.type=s),class:"w-full rounded-lg border border-gray-300 bg-white p-3 text-gray-700 focus:border-blue-500"},[...t[10]||(t[10]=[e("option",{value:"video"},"Vidéo",-1),e("option",{value:"image"}," Image / Document ",-1)])],512),[[F,l.value.type]])])]),e("div",z,[t[15]||(t[15]=e("label",{class:"mb-4 block text-xs font-bold text-gray-500 uppercase"},"Source du téléchargement",-1)),e("div",L,[e("label",A,[a(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=s=>i.value=s),value:"upload",class:"text-blue-600 focus:ring-blue-500"},null,512),[[m,i.value]]),t[12]||(t[12]=e("span",{class:"text-sm font-medium text-gray-700"},"Téléverser un fichier",-1))]),e("label",$,[a(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=s=>i.value=s),value:"link",class:"text-blue-600 focus:ring-blue-500"},null,512),[[m,i.value]]),t[13]||(t[13]=e("span",{class:"text-sm font-medium text-gray-700"},"Lien Google Drive / Externe",-1))])]),i.value==="link"?(r(),d("div",G,[a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.external_link=s),type:"text",placeholder:"https://drive.google.com/...",class:"w-full rounded-lg border border-blue-300 bg-blue-50 p-3 text-gray-700 placeholder-gray-400 focus:ring-2 focus:ring-blue-200"},null,512),[[p,l.value.external_link]]),t[14]||(t[14]=e("p",{class:"mt-1 text-xs text-gray-500"}," Collez le lien de partage ici. ",-1))])):(r(),d("div",P,[e("input",{type:"file",onChange:_,class:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"},null,32)]))]),e("div",Q,[l.value.type==="video"?(r(),d("div",W,[t[17]||(t[17]=e("label",{class:"mb-2 block text-xs font-bold text-gray-500 uppercase"},"ID YouTube (Pour l'aperçu)",-1)),e("div",q,[t[16]||(t[16]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded bg-red-100 text-red-600"},[e("i",{class:"fa-brands fa-youtube"})],-1)),a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.youtube_id=s),type:"text",placeholder:"ex: dQw4w9WgXcQ",class:"w-full rounded-lg border border-gray-300 p-3 text-gray-700"},null,512),[[p,l.value.youtube_id]])]),t[18]||(t[18]=e("p",{class:"mt-1 text-xs text-gray-400"}," Laissez vide si vous ne voulez pas de lecture directe. ",-1))])):x("",!0),e("div",null,[t[19]||(t[19]=e("label",{class:"mb-2 block text-xs font-bold text-gray-500 uppercase"},"Miniature (Image)",-1)),e("input",{type:"file",onChange:y,class:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-gray-100 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-gray-700 hover:file:bg-gray-200"},null,32)])]),e("div",H,[e("div",J,[t[20]||(t[20]=e("label",{class:"mb-2 block text-xs font-bold text-gray-500 uppercase"},"Badge",-1)),a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.badge=s),type:"text",placeholder:"ex: 4K",class:"w-full rounded-lg border border-gray-300 p-3 text-gray-700"},null,512),[[p,l.value.badge]])]),e("div",K,[b.value?(r(),d("span",O,n(b.value),1)):x("",!0),e("button",{onClick:h,disabled:f.value,class:"transform rounded-lg bg-blue-600 px-8 py-3 font-bold text-white shadow-lg transition hover:scale-105 hover:bg-blue-700"},n(f.value?"Ajout...":"Ajouter le Fichier"),9,R)])])])]),e("div",X,[e("div",Y,[e("h3",Z," Fichiers du Projet ("+n(g.value.length)+") ",1)]),e("div",ee,[(r(!0),d(C,null,U(g.value,s=>(r(),d("div",{key:s.id,class:"group flex gap-4 rounded-xl border border-gray-200 bg-white p-4 transition hover:border-blue-300 hover:shadow-md"},[e("div",te,[e("img",{src:s.thumbnail,class:"h-full w-full object-cover"},null,8,le),s.type==="video"?(r(),d("div",se,[...t[22]||(t[22]=[e("i",{class:"fa-solid fa-play text-xs text-white"},null,-1)])])):x("",!0)]),e("div",oe,[e("div",null,[e("h4",{class:"truncate text-sm font-bold text-gray-900",title:s.name},n(s.name),9,ae),e("p",re,n(s.date),1)]),e("div",de,[e("span",ie,n(s.badge),1),e("button",{onClick:be=>w(s.id),class:"text-gray-400 transition hover:text-red-500"},[...t[23]||(t[23]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,ne)])])]))),128))])])])])]),_:1}))}},xe=S(ue,[["__scopeId","data-v-03d0d25c"]]);export{xe as default};
